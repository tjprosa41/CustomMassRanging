<UserControl x:Class="CustomMassRanging.CustomMassRangingView"
             x:ClassModifier="internal"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:CustomMassRanging"
             xmlns:utilities="clr-namespace:Cameca.CustomAnalysis.Utilities.Controls;assembly=Cameca.CustomAnalysis.Utilities"
             xmlns:controls="clr-namespace:Cameca.Extensions.Controls;assembly=Cameca.Extensions.Controls"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
             DataContext="{Binding Node}"
             d:DataContext="{d:DesignInstance Type={x:Type local:CustomMassRanging}}">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </UserControl.Resources>

    <utilities:ButtonOverlayControl ButtonContent="Update"
                                   ButtonCommand="{Binding UpdateCommand}"
                                   OverlayVisibility="{Binding UpdateCommandCanExecute, Converter={StaticResource BooleanToVisibilityConverter}}">
        <!--Main content here-->

        <!--Grid is one of the most flexible layout controls-->
        <Grid>
            <Grid.RowDefinitions>
                <!--Star takes up as much space as possible of the remaining layout-->
                <RowDefinition Height="*" />
                <!--Star takes up as much space as possible of the remaining layout-->
                <RowDefinition Height="*" />
                <!--Auto uses as much space as necessary to fit the control in that row/column-->
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <!--Star sizing is proportional to the total sum - here the first (left) column will take 2/3 of the width,was 2* and *-->
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="400" />
            </Grid.ColumnDefinitions>

            <controls:Chart2D x:Name="MassHistogramChart2D"
                              Grid.Row="0"
                              Grid.Column="0"
                              Grid.RowSpan="3"
                              DataSource="{Binding HistogramData}"
                              AxisXLabel="Mass to Charge Ratio (Da)"
                              AxisYLabel="Counts"
                              IsLogScaleY="True" />

            <controls:Table x:Name="Ranges"
                            AutoWidth="True"
                            Grid.Row="0"
                            Grid.Column="1"
                            ItemsSource="{Binding RangesTable}" />

            <controls:PropertyGrid 
                            Grid.Row="1"
                            Grid.Column="1"
                            SelectedObject="{Binding Parameters}" />

            <Button x:Name="ExampleActionButton"
                    Grid.Row="2"
                    Grid.Column="1"
                    Content="Apply Modified Ranges"
                    Width="40" Height="24" Padding="1"
                    Command="{Binding ApplyRangeChangesCommand}" />

            <GridSplitter Grid.Column="1" 
                      Grid.RowSpan="2"
                      VerticalAlignment="Stretch" 
                      HorizontalAlignment="Left" 
                      Margin="0" 
                      ResizeDirection="Columns"           
                      ShowsPreview="False"/>

            <GridSplitter Grid.Row="1"
                      Grid.Column="1"
                      Grid.ColumnSpan="1"
                      VerticalAlignment="Top" 
                      HorizontalAlignment="Stretch" 
                      Margin="0" 
                      ResizeDirection="Rows"           
                      ShowsPreview="False"/>
        </Grid>



    </utilities:ButtonOverlayControl>
</UserControl>
